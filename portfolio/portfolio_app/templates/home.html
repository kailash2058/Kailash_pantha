{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kailash Pantha - Portfolio</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="https://kit.fontawesome.com/8ce6695331.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

    <!-- Small nav + layout overrides to ensure fixed top nav and responsive menu works even if styles.css is different -->
    <style>
        /* Use variables defined in static/css/styles.css so .dark-mode on <html> updates colors globally */
        html,body{background:var(--color-bg-primary); color:var(--color-text-primary);}
        a{color:var(--color-text-primary);} 

        /* Fixed navbar and layout spacing */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(6px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .dark-mode .navbar{ background: rgba(8,12,20,0.7); }
        .nav-container { display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:0.65rem 1rem; }
        .nav-brand .brand-name { font-weight:700; font-size:1.15rem; }

        /* Desktop menu */
        .nav-menu { list-style:none; display:flex; gap:0.5rem; align-items:center; margin:0; padding:0; }
        .nav-menu li { margin:0; }
        .nav-link { color: var(--color-text-primary); text-decoration:none; padding:0.45rem 0.7rem; border-radius:6px; transition: background .15s; }
        .nav-link:hover { background: rgba(0,0,0,0.05); }

        /* Toggle buttons hidden on desktop */
        .nav-toggle { display:none; background:transparent; border:0; cursor:pointer; font-size:1.2rem; z-index:1400; }
        .nav-close { display:none; background:transparent; border:0; cursor:pointer; font-size:1.4rem; color:var(--color-text-primary); z-index:1500; }

        /* Mobile behavior */
        @media (max-width: 900px) {
            .nav-toggle { display:block; }
            /* slide menu using transform for reliable behavior; hidden state is non-interactive */
            .nav-menu { position: fixed; right: 0; top: 0; height: 100vh; width: 280px; flex-direction: column; padding: 1.25rem; background: linear-gradient(180deg,var(--color-bg-primary),var(--color-bg-secondary)); box-shadow: -6px 0 24px rgba(35,38,41,0.07); gap:1rem; transition: transform .28s ease, opacity .18s ease; transform: translateX(100%); opacity: 0; pointer-events: none; z-index:1300; }
            .dark-mode .nav-menu{ background: linear-gradient(180deg,#071124,#071a2a); }
            .nav-menu.active { transform: translateX(0); opacity:1; pointer-events: auto; }
            /* nav close button placed at top-right above menu */
            .nav-close { display:none; position: fixed; right: 0.5rem; top: 0.6rem; z-index:1500; background:transparent; padding:0.45rem; border-radius:6px; opacity:.98; }
            /* show close button only when menu active (sibling selector) */
            .nav-menu.active ~ .nav-close { display:block; }
            .nav-menu li { width:100%; }
            .nav-link { display:block; width:100%; padding:0.75rem 0.5rem; }
        }

        /* Make room for fixed nav */
        body { padding-top: 64px; transition: background .25s, color .25s; }
        /* Prevent background scroll when mobile nav is open */
        body.nav-open { overflow: hidden; }
        .hero { padding-top: 40px; padding-bottom: 80px; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 1rem; }

        /* Small aesthetic helpers */
        .section-label { color:var(--color-accent-primary); font-weight:700; margin-bottom:0.5rem; }
        .section-title { font-size:1.75rem; margin-bottom:1rem; }
        .btn { display:inline-block; padding:.6rem 1rem; border-radius:8px; text-decoration:none; }
        .btn-primary { background:var(--color-text-primary); color:var(--color-bg-primary); }
        .btn-secondary { background:transparent; border:1px solid var(--color-text-primary); color:var(--color-text-primary); }

        /* Profile image in hero (increased size) */
        .hero-content { display:flex; gap:2rem; align-items:center; justify-content:space-between; }
        /* increased by 1.5x: 220 -> 330 */
        .profile-img { width:330px; height:330px; border-radius:50%; object-fit:cover; box-shadow: 0 12px 30px rgba(2,6,23,0.12); border:6px solid rgba(255,255,255,0.95); }

        @media (max-width:900px) {
            .hero-content { flex-direction:column; text-align:center; }
            /* increased mobile size: 160 -> 240 */
            .profile-img { margin: 0 0 0.75rem 0; width:240px; height:240px; }
        }

        /* Skip link for keyboard users */
        .skip-link { position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden; }
        .skip-link:focus { left:1rem; top:1rem; width:auto; height:auto; padding:0.5rem 0.75rem; background:var(--color-text-primary); color:var(--color-bg-primary); z-index:2000; border-radius:6px; }

        /* Theme toggle styles */
        .theme-btn { background:transparent; border:0; cursor:pointer; padding:6px; border-radius:8px; color:var(--color-text-primary); }
        .theme-btn:focus { outline:2px solid var(--color-accent-primary); }

        /* Dark mode overrides for content cards, etc. */
        .project-card, .blog-card, .event-card { background: var(--color-bg-secondary); border-radius:10px; overflow:hidden; box-shadow:0 8px 30px rgba(2,6,23,0.06); }

    </style>
</head>

<body>
    <a href="#main" class="skip-link">Skip to content</a>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container nav-container">
            <div class="nav-brand">
                <span class="brand-name">K.P</span>
            </div>
            <!-- Updated navbar with Blog and Events sections, added hamburger menu -->
            <ul class="nav-menu" id="navMenu" role="navigation" aria-label="Main Navigation">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#expertise" class="nav-link">Skills</a></li>
                <li><a href="#projects" class="nav-link">Projects</a></li>
                <li><a href="#blog" class="nav-link">Blog</a></li>
                <li><a href="#events" class="nav-link">Events</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            <div style="display:flex; align-items:center; gap:0.5rem;">
                <button class="nav-toggle" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>

                <!-- Theme toggle (dark / light) -->
                <button id="themeToggle" class="theme-btn" aria-pressed="false" aria-label="Toggle dark mode">
                    <i id="themeIcon" class="fa-solid fa-moon"></i>
                </button>
            </div>
            <!-- mobile close button (sibling to menu) -->
            <button class="nav-close" aria-label="Close menu"><i class="fa-solid fa-xmark"></i></button>
         </div>
     </nav>

    <main id="main">
    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-gradient"></div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <span class="hero-badge">Welcome to My Portfolio</span>
                    <h1 class="hero-title">
                        Engineering Intelligent Systems with Purpose
                    </h1>
                    <p class="hero-description">
                        I’m Kailash Pantha, focused on designing and building reliable, real-world technology through disciplined engineering and continuous experimentation. This space showcases my work across intelligent systems, data-driven solutions, and applied engineering projects.
                    </p>
                    <p class="hero-description">
                        Explore my projects, research, and hands-on work that reflect a problem-first mindset and a commitment to building technology that matters.
                    </p>
                    <div class="hero-cta">
                        <a href="#projects" class="btn btn-primary">
                            Explore My Work
                        </a>
                        <a href="#contact" class="btn btn-secondary">
                            Let's Talk
                        </a>
                    </div>
                </div>

                <!-- Profile image pulled from static files -->
                <img src="{% static 'css/images/kailash.png' %}" alt="Kailash Pantha" class="profile-img">
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="section-label">ABOUT</div>
            <div class="about-grid">
                <div class="about-content">
                    <h2 class="section-title">Who I Am</h2>
                    <p class="about-text">
                        I’m Kailash Pantha, an Electronics, Communication, and Information Engineering graduate with a strong interest in Machine Learning, AI systems, and intelligent hardware–software integration. I enjoy working at the intersection of theory and practice, building solutions that transform complex problems into real-world applications.
                    </p>
                    <p class="about-text">
                        My experience spans AI, computer vision, NLP, IoT, and data engineering, with hands-on work in developing end-to-end systems—from data pipelines and model development to deployment. Driven by curiosity and continuous learning, I aim to build scalable, impactful, and research-driven technologies that make a meaningful difference.
                    </p>
                    <div class="about-stats">
                        <div class="stat-item">
                            <div class="stat-number">10+</div>
                            <div class="stat-label">Projects</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">3+</div>
                            <div class="stat-label">Years</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">100%</div>
                            <div class="stat-label">Dedication</div>
                        </div>
                    </div>
                </div>
                <div class="about-skills">
                    <h3 class="skills-heading">Core Competencies</h3>
                    <div class="skill-list">

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Machine Learning &amp; AI Systems</span>
                                <span class="skill-badge">Intermediate</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 65%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Data Engineering &amp; ETL Pipelines</span>
                                <span class="skill-badge">Intermediate</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 70%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Backend &amp; API Development</span>
                                <span class="skill-badge">Advanced</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 85%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Embedded Systems &amp; IoT</span>
                                <span class="skill-badge">Advanced</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 80%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Computer Vision &amp; Signal Processing</span>
                                <span class="skill-badge">Advanced</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 85%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Linux, DevOps &amp; Tooling</span>
                                <span class="skill-badge">Advanced</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 80%"></div>
                            </div>
                        </div>

                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">Problem Solving &amp; Research-Oriented Development</span>
                                <span class="skill-badge">Expert</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: 92%"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Expertise Section -->
    <section id="expertise" class="expertise">
        <div class="container">
            <div class="section-label">EXPERTISE</div>
            <h2 class="section-title">What I Specialize In</h2>
            <div class="expertise-grid">

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-brain"></i></div>
                    <h3>Machine Learning &amp; AI Systems</h3>
                    <p>Designing, training, and optimizing machine learning and deep learning models for real-world applications, with experience in computer vision, NLP, and intelligent decision systems.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-eye"></i></div>
                    <h3>Computer Vision &amp; Edge AI</h3>
                    <p>Building vision-based systems such as object detection, thermal imaging, and deepfake detection, including deployment on edge devices like Raspberry Pi and embedded platforms.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-database"></i></div>
                    <h3>Data Engineering &amp; Analytics</h3>
                    <p>Developing automated ETL/ELT pipelines, data modeling, and analytical workflows to transform raw data into actionable insights using Python and cloud-based tools.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-server"></i></div>
                    <h3>Backend &amp; API Development</h3>
                    <p>Creating scalable backend services and RESTful APIs using FastAPI and Django, including ML model serving, authentication, and secure data handling.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-microchip"></i></div>
                    <h3>Embedded Systems &amp; IoT Solutions</h3>
                    <p>Designing intelligent embedded systems using Arduino, STM32, ROS2, and sensor networks, integrating hardware with software for automation and real-time control.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-cloud"></i></div>
                    <h3>Cloud, Linux &amp; Deployment</h3>
                    <p>Working with Linux environments, Docker, and AWS fundamentals to deploy, manage, and maintain production-ready applications and ML pipelines.</p>
                </div>

                <div class="expertise-card">
                    <div class="card-icon"><i class="fa-solid fa-flask"></i></div>
                    <h3>Research-Driven Problem Solving</h3>
                    <p>Applying analytical thinking and research methodologies to solve complex engineering challenges, bridging academic concepts with practical implementations.</p>
                </div>

            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <div class="container">
            <div class="section-label">PROJECTS</div>
            <h2 class="section-title">Selected Projects</h2>
            <div class="projects-grid">
                <!-- Updated project list from user -->

                <div class="project-card">
                    <div class="project-info">
                        <h3>Thermal Imaging–Based Human Detection System</h3>
                        <p>Built a real-time human detection system using thermal imagery for reliable surveillance in low-visibility environments. The system runs on edge hardware with GPS tagging, enabling location-aware detection in challenging conditions.</p>
                        <div class="project-tags">
                            <span>Python</span>
                            <span>YOLOv8</span>
                            <span>OpenCV</span>
                            <span>FLIR Lepton</span>
                            <span>Raspberry Pi</span>
                            <span>GPS</span>
                        </div>
                        <a href="#" class="project-link">GitHub →</a>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-info">
                        <h3>SmartDocBot — Document-Aware Conversational Agent</h3>
                        <p>Developed an intelligent chatbot capable of answering document-based queries and scheduling appointments with robust date parsing and input validation. Integrated a RAG pipeline for accurate and scalable information retrieval.</p>
                        <div class="project-tags">
                            <span>Python</span>
                            <span>Gemini</span>
                            <span>RAG</span>
                            <span>Streamlit</span>
                            <span>Pinecone</span>
                        </div>
                        <a href="#" class="project-link">GitHub →</a>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-info">
                        <h3>Deepfake Detection System (MesoNet-4)</h3>
                        <p>Implemented a CNN-based deepfake detection system to identify manipulated images and videos by analyzing spatial inconsistencies. The project explored both deepfake generation techniques and detection strategies.</p>
                        <div class="project-tags">
                            <span>Python</span>
                            <span>TensorFlow</span>
                            <span>Keras</span>
                            <span>OpenCV</span>
                            <span>NumPy</span>
                        </div>
                        <a href="#" class="project-link">GitHub →</a>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-info">
                        <h3>Speech Content Analysis System</h3>
                        <p>Designed a modular NLP pipeline to analyze speeches from YouTube videos and PDFs, generating topic-specific analytical reports with multilingual support. Deployed as an API-driven system for flexible input handling.</p>
                        <div class="project-tags">
                            <span>OpenAI LLMs</span>
                            <span>Sentence Transformers</span>
                            <span>YouTube API</span>
                            <span>Google Translate</span>
                            <span>FastAPI</span>
                        </div>
                        <a href="#" class="project-link">GitHub →</a>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-info">
                        <h3>KISSAN — Automated Drip Irrigation System</h3>
                        <p>Built an embedded system that automates irrigation by monitoring soil moisture and environmental conditions, optimizing water usage for agriculture.</p>
                        <div class="project-tags">
                            <span>ATmega328P</span>
                            <span>Soil Moisture Sensor</span>
                            <span>DHT11</span>
                            <span>Embedded C</span>
                            <span>L293D</span>
                        </div>
                        <a href="#" class="project-link">Project Details →</a>
                    </div>
                </div>

                <div class="project-card">
                    <div class="project-info">
                        <h3>Drone-Powered Object Detection System</h3>
                        <p>Integrated a YOLO-based object detection model with a drone platform to perform real-time aerial object detection.</p>
                        <div class="project-tags">
                            <span>DJI Tello</span>
                            <span>YOLOv5</span>
                        </div>
                        <a href="#" class="project-link">GitHub →</a>
                    </div>
                </div>

            </div>

            <!-- CTA to view full projects page -->
            <div style="text-align:center; margin-top:1.25rem;">
                <a href="{% url 'projects_all' %}" class="btn btn-primary">Show All Projects</a>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <!-- Added full Blog section with cards, categories, dates, and read more links -->
    <section id="blog" class="blog">
        <div class="container">
            <div class="section-label">LATEST ARTICLES</div>
            <h2 class="section-title">Blog & Articles</h2>

            <style>
                /* small gallery preview for home */
                .blog-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1rem; }
                .blog-card { display:flex; flex-direction:column; background:var(--color-bg-secondary); border-radius:10px; overflow:hidden; }
                .blog-image img{ width:100%; height:160px; object-fit:cover; display:block; }
                .photo-gallery { display:grid; grid-template-columns: repeat(3,1fr); gap:6px; margin-top:1rem; }
                .photo-gallery img{ width:100%; height:88px; object-fit:cover; border-radius:6px; }
            </style>

            <div class="blog-grid" id="homeBlogGrid">
                <!-- Will be populated from /blogs/ (first 3 articles) -->
            </div>

            <script>
                (function(){
                    const container = document.getElementById('homeBlogGrid');
                    if(!container) return;
                    const blogsUrl = "{% url 'blogs_all' %}";
                    fetch(blogsUrl, { credentials: 'same-origin' })
                        .then(resp => resp.text())
                        .then(html => {
                            const parser = new DOMParser();
                            const doc = parser.parseFromString(html, 'text/html');
                            const articles = doc.querySelectorAll('.blog-card');
                            for(let i=0;i<Math.min(3, articles.length); i++){
                                const node = articles[i].cloneNode(true);
                                // remove internal <style> tags if any
                                container.appendChild(node);
                            }

                            // attach delegated click handler to open the article modal from cloned cards
                            const articleModal = document.getElementById('articleModal');
                            const modalImage = articleModal?.querySelector('.modal-image');
                            const modalTitle = articleModal?.querySelector('.modal-title');
                            const modalMeta = articleModal?.querySelector('.modal-meta');
                            const modalBody = articleModal?.querySelector('.modal-body');
                            const modalClose = articleModal?.querySelector('.modal-close');

                            container.addEventListener('click', function(e){
                                const link = e.target.closest('.blog-link');
                                if(!link) return;
                                e.preventDefault();
                                const card = link.closest('.blog-card');
                                if(!card || !articleModal) return;
                                const title = card.querySelector('h3')?.innerText || 'Article';
                                const date = card.querySelector('.blog-date')?.innerText || card.querySelector('.muted')?.innerText || '';
                                const category = card.querySelector('.blog-category')?.innerText || '';
                                const img = card.querySelector('img')?.src || '';
                                const summary = card.querySelector('p')?.innerText || '';

                                modalTitle.textContent = title;
                                modalMeta.textContent = [date, category].filter(Boolean).join(' — ');
                                if(img){ modalImage.src = img; modalImage.style.display = ''; } else { modalImage.style.display = 'none'; }
                                modalBody.innerHTML = `
                                    <p>${summary}</p>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam.</p>
                                    <p>Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                                `;
                                articleModal.setAttribute('aria-hidden','false');
                                document.body.classList.add('modal-open');
                                modalClose?.focus();
                            });
                 })
                 .catch(()=>{ container.innerHTML = '<p>Unable to load articles.</p>'; });
             })();
         </script>

            <!-- small photo gallery preview -->
            <div style="margin-top:1rem;">
                <div class="section-label">TRAVEL PHOTOS</div>
                <div class="photo-gallery">
                    <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=800&q=80&auto=format&fit=crop" alt="photo1">
                    <img src="https://images.unsplash.com/photo-1504198453319-5ce911bafcde?w=800&q=80&auto=format&fit=crop" alt="photo2">
                    <img src="https://images.unsplash.com/photo-1491553895911-0055eca6402d?w=800&q=80&auto=format&fit=crop" alt="photo3">
                </div>
            </div>

            <!-- CTA to view full blog/articles page -->
            <div style="text-align:center; margin-top:1.25rem;">
                <a href="{% url 'blogs_all' %}" class="btn btn-primary">Show All Articles</a>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <!-- Converted to a journal-style Events & Workshops section (no registrations) -->
    <section id="events" class="events">
        <div class="container">
            <div class="section-label">EVENTS & WORKSHOPS</div>
            <h2 class="section-title">Events & Workshops — Journal</h2>

            <div class="events-grid" id="homeEventsGrid">
                <!-- will be populated with first 3 .event-card elements from events_all -->
            </div>

            <!-- No registration CTA: link to full events page for an archive or extended notes -->
            <div style="text-align:center; margin-top:1.25rem;">
                <a href="{% url 'events_all' %}" class="btn btn-primary">View Event Archive</a>
            </div>
        </div>
    </section>

    <script>
        (function(){
            const container = document.getElementById('homeEventsGrid');
            if(!container) return;
            const eventsUrl = "{% url 'events_all' %}";
            fetch(eventsUrl, { credentials: 'same-origin' })
                .then(r => r.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const cards = doc.querySelectorAll('.event-card');
                    for(let i=0;i<Math.min(3,cards.length); i++){
                        const node = cards[i].cloneNode(true);
                        container.appendChild(node);
                    }
                })
                .catch(()=>{ container.innerHTML = '<p>Unable to load events.</p>'; });
        })();
    </script>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-label">GET IN TOUCH</div>
            <h2 class="section-title">Let's Work Together</h2>
            <div class="contact-wrapper">
                <div class="contact-left">
                    <p class="contact-description">
                        Have an exciting project or opportunity? I'd love to collaborate and create something amazing. Reach out anytime!
                    </p>
                    <div class="contact-methods">
                        <a href="mailto:kailashpantha2020@gmail.com" class="contact-method">
                            <i class="fa-solid fa-envelope"></i>
                            <span>kailashpantha2020@gmail.com</span>
                        </a>
                        <a href="tel:+977 9861882512" class="contact-method">
                            <i class="fa-solid fa-phone"></i>
                            <span>+977 9861882512</span>
                        </a>
                    </div>
                    <div class="social-links">
                        <h4>Connect on Social</h4>
                        <div class="social-icons">
                            <a href="https://www.linkedin.com/in/kailash-pantha-09521919b/" target="_blank" class="social-link">
                                <i class="fa-brands fa-linkedin"></i>
                            </a>
                            <a href="https://github.com/kailash2058" target="_blank" class="social-link">
                                <i class="fa-brands fa-github"></i>
                            </a>
                            <a href="https://www.facebook.com/pantha.kailash/" target="_blank" class="social-link">
                                <i class="fa-brands fa-facebook"></i>
                            </a>
                            <a href="https://www.instagram.com/kailash_pantha/" target="_blank" class="social-link">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Contact form: render Django form and show success/error messages -->
                {% comment %} Display success message when redirected with ?sent=1, error when ?sent=0 {% endcomment %}
                <div class="contact-form-wrapper">
                    {% if sent == '1' %}
                        <div class="alert alert-success">Thank you — your message has been sent. I will get back to you shortly.</div>
                    {% elif sent == '0' %}
                        <div class="alert alert-error">Sorry, something went wrong while sending your message. Please try again later.</div>
                    {% endif %}

                    <form class="contact-form" method="POST" action="{% url 'contact' %}">
                        {% csrf_token %}

                        {% if form.non_field_errors %}
                            <div class="form-errors">{{ form.non_field_errors }}</div>
                        {% endif %}

                        <div class="form-group">
                            {{ form.name.errors }}
                            {{ form.name.label_tag }}
                            {{ form.name }}
                        </div>

                        <div class="form-group">
                            {{ form.email.errors }}
                            {{ form.email.label_tag }}
                            {{ form.email }}
                        </div>

                        <div class="form-group">
                            {{ form.message.errors }}
                            {{ form.message.label_tag }}
                            {{ form.message }}
                        </div>

                        <button type="submit" class="btn btn-primary btn-large">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Kailash P. Crafted with creativity and passion.</p>
        </div>
    </footer>

    <!-- Theme is controlled by the toggle in the navbar; preference persisted in localStorage -->

    <script>
        // Robust mobile nav and theme script
        const navMenu = document.getElementById('navMenu');
        const navToggle = document.querySelector('.nav-toggle');
        const navClose = document.querySelector('.nav-close');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');

        // Initialize ARIA and state
        if (navMenu) {
            navMenu.setAttribute('aria-hidden', 'true');
        }
        if (navToggle) {
            navToggle.setAttribute('aria-expanded', 'false');
        }
        if (navClose) {
            navClose.setAttribute('aria-hidden', 'true');
        }

        function setMenuState(open) {
            if (!navMenu) return;
            navMenu.classList.toggle('active', open);
            document.body.classList.toggle('nav-open', open);
            navMenu.setAttribute('aria-hidden', String(!open));
            if (navToggle) navToggle.setAttribute('aria-expanded', String(open));
            if (navClose) navClose.setAttribute('aria-hidden', String(!open));
        }

        // Toggle behavior for hamburger
        if (navToggle) {
            navToggle.addEventListener('click', function (e) {
                e.stopPropagation();
                const isOpen = navMenu && navMenu.classList.contains('active');
                setMenuState(!isOpen);
            });
        }

        // Close button inside mobile UI
        if (navClose) {
            navClose.addEventListener('click', function (e) {
                e.stopPropagation();
                setMenuState(false);
            });
        }

        // Close on Escape
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') setMenuState(false);
        });

        // Close when clicking or touching outside the menu
        function outsideClickHandler(e) {
            if (!navMenu || !navMenu.classList.contains('active')) return;
            const target = e.target;
            if (navMenu.contains(target)) return;
            if (navToggle && (navToggle.contains(target) || navToggle === target)) return;
            if (navClose && (navClose.contains(target) || navClose === target)) return;
            setMenuState(false);
        }
        document.addEventListener('click', outsideClickHandler);
        document.addEventListener('touchstart', outsideClickHandler);

        // Smooth scrolling for internal anchors
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const hash = this.getAttribute('href');
                if (!hash || hash === '#') return; // allow normal behavior for '#'
                const target = document.querySelector(hash);
                if (target) {
                    e.preventDefault();
                    setMenuState(false);
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Theme toggle logic (persisted in localStorage)
        const userPref = localStorage.getItem('theme');
        function applyTheme(theme){
            if(theme === 'dark'){
                document.documentElement.classList.add('dark-mode');
                if(themeIcon) themeIcon.className = 'fa-solid fa-sun';
                if(themeToggle) { themeToggle.setAttribute('aria-pressed','true'); themeToggle.setAttribute('aria-label','Switch to light mode'); }
            } else {
                document.documentElement.classList.remove('dark-mode');
                if(themeIcon) themeIcon.className = 'fa-solid fa-moon';
                if(themeToggle) { themeToggle.setAttribute('aria-pressed','false'); themeToggle.setAttribute('aria-label','Switch to dark mode'); }
            }
        }

        if(userPref){ applyTheme(userPref); }
        else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ applyTheme('dark'); }
        else { applyTheme('light'); }

        if (themeToggle) themeToggle.addEventListener('click', function () {
            const isDark = document.documentElement.classList.contains('dark-mode');
            const next = isDark ? 'light' : 'dark';
            applyTheme(next);
            localStorage.setItem('theme', next);
        });
    </script>

</body>
</html>
